{"remainingRequest":"D:\\projects\\vue-intro\\porsan\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projects\\vue-intro\\porsan\\frontend\\src\\views\\Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projects\\vue-intro\\porsan\\frontend\\src\\views\\Search.vue","mtime":1608277200211},{"path":"D:\\projects\\vue-intro\\porsan\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projects\\vue-intro\\porsan\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\projects\\vue-intro\\porsan\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projects\\vue-intro\\porsan\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBAIGlzIGFuIGFsaWFzIHRvIC9zcmMNCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYw0KaW1wb3J0IFNlYXJjaExheW91dCBmcm9tICJAL2NvbXBvbmVudHMvU2VhcmNoTGF5b3V0LnZ1ZSI7DQppbXBvcnQgeyByZXF1ZXN0c01peGluIH0gZnJvbSAiQC9taXhpbnMvcmVxdWVzdHNNaXhpbiI7DQppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UuanMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiaG9tZSIsDQogIGNvbXBvbmVudHM6IHsNCiAgICBTZWFyY2hMYXlvdXQNCiAgfSwNCiAgbWl4aW5zOiBbcmVxdWVzdHNNaXhpbl0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNlY3Rpb25zOiBgYXJ0cywgYXV0b21vYmlsZXMsIGJvb2tzLCBidXNpbmVzcywgZmFzaGlvbiwNCiAgICAgIGZvb2QsIGhlYWx0aCwgaG9tZSwgaW5zaWRlciwgbWFnYXppbmUsIG1vdmllcywgbmF0aW9uYWwsDQogICAgICBueXJlZ2lvbiwgb2JpdHVhcmllcywgb3BpbmlvbiwgcG9saXRpY3MsIHJlYWxlc3RhdGUsIHNjaWVuY2UsDQogICAgICBzcG9ydHMsIHN1bmRheXJldmlldywgdGVjaG5vbG9neSwgdGhlYXRlciwNCiAgICAgIHRtYWdhemluZSwgdHJhdmVsLCB1cHNob3QsIHdvcmxkYA0KICAgICAgICAuc3BsaXQoIiwiKQ0KICAgICAgICAubWFwKHMgPT4gcy50cmltKCkpLA0KICAgICAgc2VsZWN0ZWRTZWN0aW9uOiAiYXJ0cyIsDQogICAgICBhcnRpY2xlczogW10sDQogICAgDQogICAgICBmb3JtOiB7fSwNCiAgICAgICAgICAgIHF1ZXN0aW9uczogW10sDQogICAgICBuZXh0OiBudWxsLA0KICAgICAgbG9hZGluZ1F1ZXN0aW9uczogZmFsc2UNCiAgICB9Ow0KICB9LA0KICBiZWZvcmVNb3VudCgpIHsNCg0KICB9LA0KICBtZXRob2RzOiB7DQoNCg0KICAgIGFzeW5jIG9uU3VibWl0KCkgew0KICAgICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IHRoaXMuJHJlZnMub2JzZXJ2ZXIudmFsaWRhdGUoKTsNCiAgICAgIGlmICghaXNWYWxpZCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgIA0KICBlbHNlIHsNCiAgICANCiANCiAgICAgIC8vIGxldCBlbmRwb2ludCA9IGAvYXBpL3F1ZXN0aW9ucy8ke3RoaXMuc2x1Z30vYW5zd2Vycy9gO3RoaXMuZm9ybS5rZXl3b3JkDQogICAgICAvLyBsZXQgZW5kcG9pbnQgPSBgL2FwaS9xdWVzdGlvbnMva2V5d29yZDoke3RoaXMuZm9ybS5rZXl3b3JkfS9zZWFyY2gvYDsNCiAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3F1ZXN0aW9ucy9zZWFyY2gvJHt0aGlzLmZvcm0ua2V5d29yZH0vYDsNCiAgICAgIC8vIGxldCBlbmRwb2ludCA9IGAvYXBpL2dldC10b2tlbi9gOw0KDQogICAgICAgICAgIGlmICh0aGlzLm5leHQpIHsNCiAgICAgICAgZW5kcG9pbnQgPSB0aGlzLm5leHQ7DQogICAgICB9DQogICAgICB0aGlzLmxvYWRpbmdRdWVzdGlvbnMgPSB0cnVlOw0KICAgICAgYXBpU2VydmljZShlbmRwb2ludCkNCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7DQogICAgDQogICAgICAgICAgdGhpcy5xdWVzdGlvbnMucHVzaCguLi5kYXRhLnJlc3VsdHMpDQogICAgICAgICAgdGhpcy5sb2FkaW5nUXVlc3Rpb25zID0gZmFsc2U7DQogICAgICAgICAgaWYgKGRhdGEubmV4dCkgew0KICAgICAgICAgICAgdGhpcy5uZXh0ID0gZGF0YS5uZXh0Ow0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLm5leHQgPSBudWxsOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCg0KICAgICAgfQ0KICAgIH0sDQogIA0KDQoNCg0KDQoNCiAgICBhc3luYyBnZXRBbGxBcnRpY2xlcygpIHsNCiAgICAgIC8vIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRBcnRpY2xlcyh0aGlzLnNlbGVjdGVkU2VjdGlvbik7DQogICAgICAvLyB0aGlzLmFydGljbGVzID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzOw0KICAgIH0sDQogICAgc2V0U2VjdGlvbigpIHsNCiAgICAgIC8vIHRoaXMuZ2V0QWxsQXJ0aWNsZXMoKTsNCiAgICB9LA0KICAgICAgICBnZXRRdWVzdGlvbnMoKSB7DQogICAgICAvLyBtYWtlIGEgR0VUIFJlcXVlc3QgdG8gdGhlIHF1ZXN0aW9ucyBsaXN0IGVuZHBvaW50IGFuZCBwb3B1bGF0ZSB0aGUgcXVlc3Rpb25zIGFycmF5DQogICAgICBsZXQgZW5kcG9pbnQgPSAiL2FwaS9xdWVzdGlvbnMvIjsNCiAgICAgIGlmICh0aGlzLm5leHQpIHsNCiAgICAgICAgZW5kcG9pbnQgPSB0aGlzLm5leHQ7DQogICAgICB9DQogICAgICB0aGlzLmxvYWRpbmdRdWVzdGlvbnMgPSB0cnVlOw0KICAgICAgYXBpU2VydmljZShlbmRwb2ludCkNCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgdGhpcy5xdWVzdGlvbnMucHVzaCguLi5kYXRhLnJlc3VsdHMpDQogICAgICAgICAgdGhpcy5sb2FkaW5nUXVlc3Rpb25zID0gZmFsc2U7DQogICAgICAgICAgaWYgKGRhdGEubmV4dCkgew0KICAgICAgICAgICAgdGhpcy5uZXh0ID0gZGF0YS5uZXh0Ow0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLm5leHQgPSBudWxsOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICB9LCAgDQogICAgY3JlYXRlZCgpIHsNCiAgDQogIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Search.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"page\">\r\n    <h1 class=\"text-center\">Search</h1>\r\n    <SearchLayout>\r\n      <template v-slot:top>\r\n        <ValidationObserver ref=\"observer\" v-slot=\"{  }\">\r\n          <b-form @submit.prevent=\"onSubmit\" novalidate id=\"form\">\r\n            <b-form-group label=\"keyword\" label-for=\"keyword\">\r\n              <ValidationProvider name=\"keyword\" rules=\"required\" v-slot=\"{ errors }\">\r\n                <b-form-input\r\n                  :state=\"errors.length == 0\"\r\n                  v-model=\"form.keyword\"\r\n                  type=\"text\"\r\n                  required\r\n                  placeholder=\"Keyword\"\r\n                  name=\"keyword\"\r\n                ></b-form-input>\r\n                <b-form-invalid-feedback :state=\"errors.length == 0\">Keyword is required</b-form-invalid-feedback>\r\n              </ValidationProvider>\r\n            </b-form-group>\r\n            <b-button type=\"submit\" variant=\"primary\">Search</b-button>\r\n          </b-form>\r\n        </ValidationObserver>\r\n      </template>\r\n<template v-slot:bottom>\r\n         <div class=\"container \">\r\n           <br>\r\n    \r\n      <div v-for=\"question in questions\"\r\n           :key=\"question.pk\">\r\n      \r\n\r\n      <b-card\r\n          header-tag=\"header\"\r\n          header-bg-variant=\"dark\"\r\n\r\n          footer-tag=\"footer\"\r\n           footer-bg-variant=\"success\"\r\n          footer-border-variant=\"dark\"\r\n          title=\"سوال نمونه\"\r\n          style=\"text-align: justify;\"\r\n        >\r\n       <b-card-text>\r\n          <router-link\r\n            :to=\"{ name: 'question', params: { slug: question.slug } }\"\r\n            class=\"question-link question d-flex justify-content-between\"\r\n            >{{ question.content }}\r\n          </router-link>\r\n        </b-card-text>\r\n    <b-card-footer variant=\"success\" >\r\n      <span class=\"question-author \">{{ question.author }}\r\n        <b-avatar size=\"sm\" variant=\"info\">\r\n        </b-avatar>\r\n        </span>\r\n        <b-avatar size=\"sm\" variant=\"success\" >{{ question.answers_count }}</b-avatar>\r\n    </b-card-footer>\r\n  </b-card>\r\n\r\n      \r\n      </div>\r\n      <div class=\"my-4 \">\r\n        <p v-show=\"loadingQuestions\">...loading...</p>\r\n        <button\r\n          v-show=\"next\"\r\n          @click=\"getQuestions\"\r\n          class=\"btn btn-sm btn-outline-success\"\r\n          >Load More\r\n        </button>\r\n      </div>\r\n\r\n</div>\r\n\r\n      </template>\r\n    </SearchLayout>\r\n  </div>\r\n</template>\r\n<script>\r\n// @ is an alias to /src\r\n// @ is an alias to /src\r\nimport SearchLayout from \"@/components/SearchLayout.vue\";\r\nimport { requestsMixin } from \"@/mixins/requestsMixin\";\r\nimport { apiService } from \"@/common/api.service.js\";\r\nexport default {\r\n  name: \"home\",\r\n  components: {\r\n    SearchLayout\r\n  },\r\n  mixins: [requestsMixin],\r\n  data() {\r\n    return {\r\n      sections: `arts, automobiles, books, business, fashion,\r\n      food, health, home, insider, magazine, movies, national,\r\n      nyregion, obituaries, opinion, politics, realestate, science,\r\n      sports, sundayreview, technology, theater,\r\n      tmagazine, travel, upshot, world`\r\n        .split(\",\")\r\n        .map(s => s.trim()),\r\n      selectedSection: \"arts\",\r\n      articles: [],\r\n    \r\n      form: {},\r\n            questions: [],\r\n      next: null,\r\n      loadingQuestions: false\r\n    };\r\n  },\r\n  beforeMount() {\r\n\r\n  },\r\n  methods: {\r\n\r\n\r\n    async onSubmit() {\r\n         const isValid = await this.$refs.observer.validate();\r\n      if (!isValid) {\r\n        return;\r\n      }\r\n     \r\n  else {\r\n    \r\n \r\n      // let endpoint = `/api/questions/${this.slug}/answers/`;this.form.keyword\r\n      // let endpoint = `/api/questions/keyword:${this.form.keyword}/search/`;\r\n      let endpoint = `/api/questions/search/${this.form.keyword}/`;\r\n      // let endpoint = `/api/get-token/`;\r\n\r\n           if (this.next) {\r\n        endpoint = this.next;\r\n      }\r\n      this.loadingQuestions = true;\r\n      apiService(endpoint)\r\n        .then(data => {\r\n    \r\n          this.questions.push(...data.results)\r\n          this.loadingQuestions = false;\r\n          if (data.next) {\r\n            this.next = data.next;\r\n          } else {\r\n            this.next = null;\r\n          }\r\n        })\r\n\r\n      }\r\n    },\r\n  \r\n\r\n\r\n\r\n\r\n\r\n    async getAllArticles() {\r\n      // const response = await this.getArticles(this.selectedSection);\r\n      // this.articles = response.data.results;\r\n    },\r\n    setSection() {\r\n      // this.getAllArticles();\r\n    },\r\n        getQuestions() {\r\n      // make a GET Request to the questions list endpoint and populate the questions array\r\n      let endpoint = \"/api/questions/\";\r\n      if (this.next) {\r\n        endpoint = this.next;\r\n      }\r\n      this.loadingQuestions = true;\r\n      apiService(endpoint)\r\n        .then(data => {\r\n          this.questions.push(...data.results)\r\n          this.loadingQuestions = false;\r\n          if (data.next) {\r\n            this.next = data.next;\r\n          } else {\r\n            this.next = null;\r\n          }\r\n        })\r\n    },  \r\n    created() {\r\n  \r\n  }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n</style>"]}]}